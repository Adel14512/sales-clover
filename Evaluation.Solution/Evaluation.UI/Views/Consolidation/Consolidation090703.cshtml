@model Evaluation.UI.Models.Consolidation.Consolidation090703VM
@{
    ViewData["Title"] = "Product";
    ViewData["SubTitle"] = "Create";
}
<link href="~/assets/extra-libs/datatables.net-bs4/css/dataTables.bootstrap4.css"
      rel="stylesheet" />
<link rel="stylesheet"
      type="text/css"
      href="~/assets/extra-libs/datatables.net-bs4/css/responsive.dataTables.min.css" />
<link rel="stylesheet" type="text/css" href="~/lib/datatableAddons/css/colvis.css">
<input type="hidden" id="ContactId" value="@Model.ContactVM.RecId">
<input type="hidden" id="SalestransactionID" value="@Model.SalesTransactionId">
<input type="hidden" id="BusinessLineCode" value="@Model.BusinessLineCode">
<input type="hidden" id="MasterClientRecID" value="">
<style>
    .consolidationselectedrow {
        background-color: yellow; /* Change the background color as needed */
    }

</style>
<div class="row">

    <div class="col-6"> <h2>@Model.ContactVM.FirstName @Model.ContactVM.MiddleName @Model.ContactVM.LastName</h2></div>
    <div class="col-6">
        <div class="" style="float: right;">

            <button type="button" id="btnDashboard" class="
                        btn btn-danger
                      ">
                <i class="m-1 fas  fa-angle-left">Dashoard</i>
            </button>

        </div>
    </div>
    <input type="file" id="fileInput" name="file" accept="application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" style="display: none">
</div>
<!-- -------------------------------------------------------------- -->
<!-- Example -->
<!-- -------------------------------------------------------------- -->
<div class="col-12">
    <div class="card">
        <div class="border-bottom title-part-padding">
            <h4 class="card-title mb-0">Consolidation</h4>
        </div>
        <table id="tPolicies" style="width:100%" class="display responsive table"></table>
        <div class="card-body wizard-content">
           
            <form id="step1from" class="validation-wizard-consolidation wizard-circle">
                <!-- Step 1 -->
                <h6>Billing</h6>
                <section>

                    @* <input type="hidden" asp-for="Product.id" class="form-control" />*@
                    <div class="row pt-3">
                       
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label asp-for="ClientId" class="control-label">Client / Policy Holder <span class="danger">*</span></label>
                                <select asp-for="ClientId" class="form-select">
                                    <option value="">--Select--</option>
                                    @foreach (var item in Model.Clients)
                                    {
                                        if (Model.ClientId == Convert.ToInt32(item.Code))
                                        {
                                            <option value="@item.Code" selected>@item.Description</option>
                                        }
                                        else
                                        {
                                            if (item.IsDefault)
                                            {
                                                <option value="@item.Code" selected>@item.Description</option>
                                            }
                                            else
                                            {
                                                <option value="@item.Code">@item.Description</option>
                                            }
                                        }


                                    }

                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label asp-for="MasterId" class="control-label">
                                    Master Account
                                    <span class="danger">*</span>
                                </label>
                                <select asp-for="MasterId" class="form-select">
                                    <option value="">--Select--</option>
                                    @foreach (var item in Model.Masters)
                                    {
                                        if (Convert.ToInt32(item.Code) == Model.MasterId)
                                        {
                                            <option value="@item.Code" selected>@item.Description</option>
                                        }
                                        else
                                        {
                                            <option value="@item.Code">@item.Description</option>
                                        }
                                    }

                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="txtInssuranceCompany" class="control-label">Inssurance Company <span class="danger">*</span></label>
                                <input type="text" disabled class="form-control" id="txtInssuranceCompany" />
                            </div>
                        </div>
                    </div>
                    <div class="row pt-3">
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="ddlIsBilling" class="control-label">Is Billing To is same as the Policy Holder <span class="danger">*</span></label>
                                <select id="ddlIsBilling" class="form-select">
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="ddlProrata" class="control-label">Pro-rata issuance is accepted<span class="danger">*</span></label>
                                <select id="ddlProrata" class="form-select">
                                    <option value="Yes">Yes</option>
                                    <option value="No">No</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="fileAttachedSigned" class="control-label">Signed Offer Attached Documents <span class="danger">*</span></label>
                                <input type="file" class="form-control" id="fileAttachedSigned" />
                                <button type="button" id="btnfileAttachedSigned" class="
                        btn btn-secondary hide
                      ">
                                    <i class="m-1 fas  fa-download"></i>
                                </button>
                                <button type="button" id="btnfileAttachedSignedRemove" class="
                        btn btn-danger hide
                      ">
                                    <i class="m-1 fas  fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="mb-3">
                                <input type="checkbox" id="checkSkipUpload" class="form-controller" />
                                <label for="checkSkipUpload" class="control-label">Skip To Upon Delivery</label>

                                <span for="checkSkipUpload" class="text-danger"></span>
                            </div>
                        </div>

                    </div>
                    <h6>Compliance</h6>
                    <div class="row pt-3">
                        <div class="col-md-4">
                            <div class="mb-3">

                                <label for="fileAttachedProposal" class="control-label">Upload Proposal form <span class="danger">*</span></label>
                                <input type="file" id="fileAttachedProposal" class="form-control" />
                                <button type="button" id="btnfileAttachedProposal" class="
                        btn btn-secondary hide
                      ">
                                    <i class="m-1 fas  fa-download"></i>
                                </button>
                                <button type="button" id="btnfileAttachedProposalRemove" class="
                        btn btn-danger hide
                      ">
                                    <i class="m-1 fas  fa-trash"></i>
                                </button>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="fileAttachedPassport" class="control-label">Upload Member's passport or IDs <span class="danger">*</span></label>
                                <input type="file" id="fileAttachedPassport" class="form-control" />
                                <button type="button" id="btnfileAttachedPassport" class="
                        btn btn-secondary hide
                      ">
                                    <i class="m-1 fas  fa-download"></i>
                                </button>
                                <button type="button" id="btnfileAttachedPassportRemove" class="
                        btn btn-danger hide
                      ">
                                    <i class="m-1 fas  fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="fileAttachedInsurance" class="control-label">Upload Existing insurance cards and policy <span class="danger">*</span></label>
                                <input type="file" id="fileAttachedInsurance" class="form-control" />
                                <button type="button" id="btnfileAttachedInsurance" class="
                        btn btn-secondary hide
                      ">
                                    <i class="m-1 fas  fa-download"></i>
                                </button>
                                <button type="button" id="btnfileAttachedInsuranceRemove" class="
                        btn btn-danger hide
                      ">
                                    <i class="m-1 fas  fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- Step 2 -->
                <h6>Schedule of Payments</h6>
                <section>
                    @* <input type="button" id="addtMiscellaneousSheets" class="btn btn-success" value="Add" /> *@
                    <table id="tPrice" style="width:100%" class="display responsive table table-striped"></table>
                </section>
                <!-- Step 4 -->
                <h6>Insureds List</h6>
                <section>
                    @* <input type="button" id="addtTechnicalSheets" class="btn btn-success" value="Add" /> *@
                    <table id="tInsured" style="width:100%" class="display responsive table table-striped">
                    </table>
                </section>
                <!-- Step 4 -->
                <h6>Policy</h6>
                <section>
                    <div class="row pt-3">
                        <div class="col-md-4">

                            <label for="txtPolicyNumber" class="control-label">Ploicy Number <span class="danger">*</span></label>
                            <input type="text" id="txtPolicyNumber" class="form-control required" />
                            <span class="error" for="txtPolicyNumber"></span>
                        </div>

                        <div class="col-md-4">
                            <label for="txtEffectiveDate" class="control-label">Effective Date<span class="danger">*</span></label>
                            <input type="date" id="txtEffectiveDate" class="form-control required" />
                        </div>
                        <div class="col-md-4">
                            <label for="txtEmissionDate" class="control-label">Emission Date <span class="danger">*</span></label>
                            <input type="date" id="txtEmissionDate" class="form-control required" />
                        </div>
                    </div>
                    <div class="row pt-3">

                        <div class="col-md-6">
                            <label for="txtExpiryDate" class="control-label">Expiry Date <span class="danger">*</span></label>
                            <input type="date" id="txtExpiryDate" class="form-control required" />
                        </div>
                        <div class="col-md-6">
                            <label for="txtPolicyHolder" class="control-label">Policy Holder <span class="danger">*</span></label>
                            <input type="text" id="txtPolicyHolder" class="form-control required" />
                        </div>
                    </div>
                    <div class="container mt-5">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th scope="col">Policy Items</th>
                                    <th scope="col">% <span id="percentInfo">(Hover to edit)</span></th>
                                    <th scope="col">Amount</th>
                                    <th scope="col">Cost Center</th>
                                    <th scope="col">Debit A/C</th>
                                    <th scope="col">Credit A/C</th>
                                </tr>
                            </thead>
                            <tbody id="policyTableBody"></tbody>
                        </table>
                    </div>

                    <div class="row pt-3">

                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="fileUploadPolicyDocument" class="control-label">Upload Policy Document <span class="danger">*</span></label>
                                <input type="file" id="fileUploadPolicyDocument" class="form-control" />
                                <button type="button" id="btnfileUploadPolicyDocument" class="
                        btn btn-secondary hide
                      ">
                                    <i class="m-1 fas  fa-download"></i>
                                </button>
                                <button type="button" id="btnfileUploadPolicyDocumentRemove" class="
                        btn btn-danger hide
                      ">
                                    <i class="m-1 fas  fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="fileUploadCommissionSheet" class="control-label">Upload Commission Sheet <span class="danger">*</span></label>
                                <input type="file" id="fileUploadCommissionSheet" class="form-control" />
                                <button type="button" id="btnfileUploadCommissionSheet" class="
                        btn btn-secondary hide
                      ">
                                    <i class="m-1 fas  fa-download"></i>
                                </button>
                                <button type="button" id="btnfileUploadCommissionSheetRemove" class="
                        btn btn-danger hide
                      ">
                                    <i class="m-1 fas  fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                </section>
            </form>



            <!-- Add Row Modal -->
            <div id="modalAddOrEditInsured" class="modal">
                <div class="modal-dialog">

                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Inssured</h4>
                        </div>
                        <form id="form">
                            <!-- Modal body -->
                            <div class="modal-body">
                                <form id="af1members">

                                    <div class="row">
                                        <label>First Name</label>
                                        <div class="md-6"> <input type="text" class="form-control" required id="txtFirstName" name="txtFirstName" placeholder="First Name"></div>
                                        <label>Middel Name</label>
                                        <div class="md-6"> <input type="text" class="form-control" required id="txtMiddelName" name="txtMiddelName" placeholder="Middel"></div>
                                        <label>Last Name</label>
                                        <div class="md-6"> <input type="text" class="form-control" required id="txtLastName" name="txtLastName" placeholder="Last"></div>
                                    </div>
                                    <div class="row">
                                        <label>Mobile</label>
                                        <div class="md-6"> <input type="text" class="form-control" required id="txtMobile" name="txtMobile" placeholder="Mobile"></div>
                                        <label>Email</label>
                                        <div class="md-6"> <input type="email" class="form-control" required id="txtEmail" name="txtEmail" placeholder="Email"></div>
                                    </div>
                                </form>
                            </div>

                        </form>
                        <!-- Modal body -->
                        <div class="modal-footer">
                            <div class="" style="display:inline-flex;float:right">
                                <div class="md-6">
                                    <button id="btnSaveInsured" class="btn btn-success">Save</button>
                                </div>
                                <div class="md-6">
                                    <button id="btnCloseModalAddOrEditInsured" class="btn btn-secondary">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <!--This page JavaScript -->

    <script src="~/assets/libs/jquery-steps/build/jquery.steps.min.js"></script>
    <script src="~/assets/extra-libs/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="~/assets/extra-libs/datatables.net-bs4/js/dataTables.responsive.min.js"></script>

    @*   <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.html5.min.js"></script> *@
   

    <script>
        var masterList = @Html.Raw(Json.Serialize(Model.Masters));
        var clientList = @Html.Raw(Json.Serialize(Model.Clients));
        var relationList = @Html.Raw(Json.Serialize(Model.Relations));
        var genderList = @Html.Raw(Json.Serialize(Model.Genders));
        var maritalStatusList = @Html.Raw(Json.Serialize(Model.MaritalStatuses));
        var regionList = @Html.Raw(Json.Serialize(Model.Regions));
        var paymentList = @Html.Raw(Json.Serialize(Model.PaymentSchedule));
        var policyRelatedDoc = @Html.Raw(Json.Serialize(Model.PolicyRelatedDoc));
        var policyList = @Html.Raw(Json.Serialize(Model.Policy));
        var salesTransactionBL090703 = @Html.Raw(Json.Serialize(Model.SalesTransactionBL090703));
    </script>
    <script src="~/js/consolidation/shared.js"></script>
    <script src="~/js/consolidation/consolidation090703.js"></script>
}