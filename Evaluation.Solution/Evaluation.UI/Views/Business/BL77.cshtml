@model Evaluation.UI.Models.BL77VM
@{
    ViewData["Title"] = "Businnes";
    ViewData["SubTitle"] = "Travel";
}
<div class=" wizard-content">
    <div class="row">
        <div class="col-6 "> <h2>@Model.ContactVM.FirstName @Model.ContactVM.MiddleName @Model.ContactVM.LastName</h2></div>
        <div class="col-6 ">
            <div class="" style="float: right;">
                <button  type="button" id="btnUploadExcel" class="
                        btn btn-primary
                      ">
                    <i class="m-1 fas fa-upload"></i>Excel Template
                </button>
            
                <button  type="button" id="btnSendEmailExcel" class="
                        btn btn-secondary
                      ">
                    <i class="m-1 fas fa-download"></i>Excel Template
                </button>

            </div>
        </div>
        <input type="file" id="fileInput" name="file" accept="application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" style="display: none">
    </div>
    <div class="">

        <div class="repeater-default mt-4">
            <div data-repeater-list="">
                <input type="hidden" id="SalesId" value="@Model.SalesTransactionBL77Dto.RecId" >
                <input type="hidden" id="BusinessLineCode">
                <input type="hidden" id="ContactId" value="@Model.ContactVM.RecId">

                <div data-repeater-item="" style="">
                    <form id="form">
                        @*@Html.AntiForgeryToken()*@

                        <div id="form-container">
                            <div class="formRow" data-row="1">
                                <h2 id="Title" name="Title[]">Insurer 1</h2>
                                <div class="row">
                                    <input type="hidden" id="Serial" name="Serial[]" value="1">
                                    <div class="mb-3 col-md-3">
                                        <label for="Company">Company</label>
                                        <input type="text" class="form-control" id="Company" name="Company[]" placeholder="Company" required>
                                    </div>
                                    <div class="mb-3 col-md-3">
                                        <label for="Staff">Staff No</label>
                                        <input type="number" id="Staff" name="Staff[]" class="form-control" placeholder="Staff" required>
                                    </div>
                                    <div class="mb-3 col-md-3">
                                        <label for="FirstName">First Name</label>
                                        <input type="text" class="form-control" id="FirstName" name="FirstName[]" placeholder="First Name" required>
                                    </div>
                                    <div class="mb-3 col-md-3">
                                        <label for="MiddleName">Middle Name</label>
                                        <input type="text" class="form-control" id="MiddleName" name="MiddleName[]" placeholder="Middle Name" required>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="mb-3 col-md-3">
                                        <label for="LastName">Last Name</label>
                                        <input type="text" id="LastName" name="LastName[]" class="form-control" placeholder="Last Name" required>
                                    </div>
                                    <div class="mb-3 col-md-3">
                                        <label for="Gender">Gender</label>
                                        <select id="Gender" class="form-select" required>
                                            @foreach (var item in Model.Genders)
                                            {
                                                <option value="@item.code">@item.description</option>
                                            }
                                        </select>
                                    </div>
                                    <div class="mb-3 col-md-3">
                                        <label for="Dob">DOB</label>
                                        <input type="date" id="Dob" name="Dob[]" class="form-control " required />
                                    </div>

                                    <div class="mb-3 col-md-3">
                                        <label for="Nationality">Nationality</label>
                                        <select class="form-select" id="Nationality" name="Nationality[]" required>
                                            @foreach (var item in Model.Regions)
                                            {
                                                if (item.isDefault)
                                                {
                                                    <option value="@item.code" selected>@item.description</option>
                                                }
                                                else
                                                {
                                                      <option value="@item.code">@item.description</option>
                                                }
                                              
                                            }

                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="mb-3 col-md-3">
                                        <label for="MaritalStatus">Marital Status</label>
                                        <select id="MaritalStatus" name="MaritalStatus[]" class="form-select" required>
                                            @foreach (var item in Model.MaritalStatuses)
                                            {
                                                <option value="@item.code">@item.description</option>
                                            }
                                        </select>
                                    </div>
                                    <div class="mb-3 col-md-3">
                                        <label for="CountryOfDeparture">Country Of Departure</label>

                                        <select class="form-select" id="CountryOfDeparture" name="CountryOfDeparture[]" required>
                                            @foreach (var item in Model.Regions)
                                            {
                                                if (item.isDefault)
                                                {
                                                    <option value="@item.code" selected>@item.description</option>
                                                }
                                                else
                                                {
                                                    <option value="@item.code">@item.description</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                    <div class="mb-3 col-md-3">
                                        <label for="CountryOfDestination">Country Of Destination</label>
                                        <select class="form-select" id="CountryOfDestination" name="CountryOfDestination[]" required>
                                            @foreach (var item in Model.Regions)
                                            {
                                                <option value="@item.code">@item.description</option>
                                            }
                                        </select>
                                    </div>
                                    <div class="mb-3 col-md-3">
                                        <label for="StayTripOption">Stay/Trip Option</label>
                                        <input type="text" class="form-control" id="StayTripOption" name="StayTripOption[]" placeholder="Stay/Trip Option">
                                    </div>
                                    <div class="mb-3 col-md-3">
                                        <label for="NoOfDays">No.of days when less than 92 Days</label>
                                        <input type="number" min="1" max="92" class="form-control" id="NoOfDays" name="NoOfDays[]" placeholder="No. Of Days" required>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="mt-3 pt-3 border-top">
                <button onclick="addForm()" class="
                          btn btn-info
                          rounded-pill
                          px-4
                          waves-effect waves-light
                        ">
                    <div class="d-flex align-items-center">
                        Add
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle feather-sm ms-2 fill-white"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                    </div>
                </button>
                <button onclick="submitForms()" style="float:right" class="
                          btn btn-primary
                          rounded-pill
                          px-4
                          waves-effect waves-light
                        ">
                    <div class="d-flex align-items-center">
                        Submit
                        <i class="m-1 far fa-save"></i>
                    </div>
                </button>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script src="~/assets/libs/jquery.repeater/jquery.repeater.min.js"></script>
    <script src="~/assets/extra-libs/jquery.repeater/repeater-init.js"></script>

    <script>
        var regionList = @Html.Raw(Json.Serialize(Model.Regions));
        var genderList = @Html.Raw(Json.Serialize(Model.Genders));
        var maritalStatusList = @Html.Raw(Json.Serialize(Model.MaritalStatuses));
        var salesTransAf1 = @Html.Raw(Json.Serialize(Model.SalesTransactionBL77Dto.AF1BL77));

    </script>
    <script src="~/js/business/BL77.js"></script>
    }
